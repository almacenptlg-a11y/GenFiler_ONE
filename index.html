<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GenFiler Suite v2.0</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* --- ESTILOS VISUALES (Tema Oscuro/Rojo) --- */
        :root {
            --sidebar-width: 260px;
            --brand-color: #C50D23;
            --bg-dark: #1e1e1e;
            --text-light: #ecf0f1;
            --hover-color: #2c3e50;
        }

        body {
            margin: 0; padding: 0;
            font-family: 'Segoe UI', sans-serif;
            overflow: hidden; /* Importante: La Suite no hace scroll, lo hacen las apps */
            display: flex;
            height: 100vh;
            background-color: #121212;
        }

        /* --- BARRA LATERAL --- */
        .sidebar {
            width: var(--sidebar-width);
            background-color: var(--bg-dark);
            color: var(--text-light);
            display: flex;
            flex-direction: column;
            border-right: 1px solid #333;
            z-index: 100;
        }

        .brand {
            padding: 25px;
            text-align: center;
            font-size: 1.5rem;
            font-weight: bold;
            letter-spacing: 1px;
            background: rgba(0,0,0,0.2);
            border-bottom: 3px solid var(--brand-color);
        }

        .brand span { color: var(--brand-color); }

        .menu {
            flex-grow: 1;
            padding-top: 20px;
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .menu-btn {
            background: none;
            border: none;
            color: #aaa;
            padding: 15px 25px;
            text-align: left;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 15px;
            text-decoration: none; /* Por si usamos <a> */
        }

        .menu-btn:hover {
            background-color: var(--hover-color);
            color: white;
            padding-left: 30px; /* Efecto de desplazamiento */
        }

        .menu-btn.active {
            background-color: rgba(197, 13, 35, 0.15); /* Fondo rojo transparente */
            color: white;
            border-right: 4px solid var(--brand-color);
        }

        .menu-btn i { width: 20px; text-align: center; }

        /* --- ÁREA PRINCIPAL (IFRAMES) --- */
        .main-stage {
            flex-grow: 1;
            position: relative;
            background-color: #f0f2f5; /* Color de fondo por defecto */
        }

        /* La magia de la persistencia */
        iframe.app-frame {
            width: 100%;
            height: 100%;
            border: none;
            position: absolute;
            top: 0; left: 0;
            background: white;
            
            /* Por defecto ocultos pero cargados */
            visibility: hidden; 
            opacity: 0;
            z-index: 0;
            transition: opacity 0.2s ease-in-out;
        }

        iframe.app-frame.active {
            visibility: visible;
            opacity: 1;
            z-index: 10;
        }

        /* Spinner de carga */
        .loader {
            position: absolute; top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            color: var(--brand-color);
            font-size: 2rem;
        }
    </style>
</head>
<body>

    <nav class="sidebar">
        <div class="brand">
            <i class="fas fa-cubes"></i> GenFiler <span>Suite</span>
        </div>

        <div class="menu">
            <button class="menu-btn active" onclick="switchApp('dashboard', this)">
                <i class="fas fa-home"></i> Inicio
            </button>

            <button class="menu-btn" onclick="switchApp('genfiler', this)">
                <i class="far fa-file-pdf" style="color:#e74c3c"></i> GenFiler PDF
            </button>

            <button class="menu-btn" onclick="switchApp('spsa', this)">
                <i class="fas fa-chart-pie" style="color:#f1c40f"></i> SPSA Filer
            </button>

            <button class="menu-btn" onclick="switchApp('xlsx', this)">
                <i class="fas fa-file-excel" style="color:#2ecc71"></i> XLSX Filer
            </button>
        </div>

        <div style="padding: 20px; font-size: 0.8rem; color: #666; text-align: center;">
            v2.0 Connected
        </div>
    </nav>

    <main class="main-stage">
        <div class="loader"><i class="fas fa-circle-notch fa-spin"></i> Cargando recursos...</div>

        <iframe id="frame-dashboard" class="app-frame active" 
            srcdoc="<body style='font-family:sans-serif; display:flex; justify-content:center; align-items:center; height:100vh; background:#f4f4f4; color:#333; text-align:center;'><div><h1 style='color:#C50D23; font-size:3rem;'>Bienvenido a GenFiler</h1><p>Selecciona una herramienta del menú para comenzar.</p></div></body>">
        </iframe>

        <iframe id="frame-genfiler" class="app-frame" 
            src="https://almacenptlg-a11y.github.io/GenFiler/">
        </iframe>

        <iframe id="frame-spsa" class="app-frame" 
            src="https://almacenptlg-a11y.github.io/SPSA_Filer/">
        </iframe>

        <iframe id="frame-xlsx" class="app-frame" 
            src="https://almacenptlg-a11y.github.io/XLSX_Reporter/">
        </iframe>

    </main>

    <script>
        function switchApp(appId, btnElement) {
            // 1. Manejo visual de botones (Sidebar)
            document.querySelectorAll('.menu-btn').forEach(btn => btn.classList.remove('active'));
            if(btnElement) btnElement.classList.add('active');

            // 2. Manejo de Iframe (La parte clave de la persistencia)
            // Ocultamos todos (quitamos clase active) pero NO cambiamos el SRC, por lo que no se recargan
            document.querySelectorAll('.app-frame').forEach(frame => {
                frame.classList.remove('active');
            });

            // Mostramos el seleccionado
            const selectedFrame = document.getElementById('frame-' + appId);
            if(selectedFrame) {
                selectedFrame.classList.add('active');
            }
        }
    </script>

</body>
</html>
